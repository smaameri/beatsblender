<html data-ng-app='mainApp'>
<head>
	<title>App</title>
  <script src = "http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
  <script src = "http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular-route.min.js"></script>
	
	
</head>
<body data-ng-controller="MainController">
	<div id='search'>
		<form data-ng-submit="search()">
		<input type='text' id='query' data-ng-model='query'>				
	</form>
	</div>
	<div id='results'>
		<p> {{ '{{results}}' }} </p>
	</div>


<script type="text/javascript">
	
	var app = angular.module('mainApp', []);
	
	app.factory('YoutubeFactory', function($http){
		
		var fac ={};
		
		fac.users = ['J', 'M', 'P'];
		
		fac.search = function(query){
        return $http.get('https://www.googleapis.com/youtube/v3/search', {
          params: {
            key: 'AIzaSyBy9_bHIiY_cr8xXiPPt8QOGT0Nq2KrbwQ',
            type: 'video',
            maxResults: '1',
            part: 'id,snippet',
            fields: 'items/id,items/snippet/title,items/snippet/description,items/snippet/thumbnails/default',
            q: query,
          }			  
        })
			};
		
		return fac;
				
	});
	
	app.controller('MainController', function($scope, YoutubeFactory){
		
		$scope.search = function(){
			YoutubeFactory.search($scope.query).then(function(response){
				$scope.results = response.data.items[0].snippet.title;
			}, function(error){
				$scope.results = "Unable to load results"
			});
		}
		
	})
	
</script>
</body>
	
	
	
</html>